mutation CreateProject($name: String!, $description: String, $dueDate: Date, $status: String!) @auth(level: USER) {
  project_insert(data: {
    name: $name,
    description: $description,
    dueDate: $dueDate,
    status: $status,
    ownerId_expr: "auth.uid"
  })
}

query ListTasksForProject($projectId: UUID!) @auth(level: USER) {
  tasks(where: {projectId: {eq: $projectId}}) {
    id
    title
    description
    dueDate
    status
    assignee {
      id
      username
    }
  }
}

mutation AddUserToProject($projectId: UUID!, $userId: UUID!, $role: String!) @auth(level: USER) {
  projectMembership_insert(data: {
    projectId: $projectId,
    userId: $userId,
    role: $role
  })
}

mutation CreateComment($taskId: UUID!, $content: String!) @auth(level: USER) {
  comment_insert(data: {
    taskId: $taskId,
    content: $content,
    authorId_expr: "auth.uid",
    createdAt_expr: "request.time"
  })
}